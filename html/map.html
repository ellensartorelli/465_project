<!DOCTYPE html >
<html lang="en">
	<head>
		<meta charset="utf-8">
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>

    	<link rel="stylesheet" type="text/css" href="/css/map.css">
	</head>
	<body>

		<div id="map"></div>
		<div id="legend"></div>

		<script type="text/javascript">
		var width = 600, height =900;
		var svg = d3.select("#map")
		.append("svg")
		.attr({"width":width, "height":height});



			// create the projection
			var projection = d3.geo.conicEqualArea()
			.parallels([40.5627805,40.8473945])
			.translate([width/2,height/2])
			.scale([1000])
			.center([40.716760,-73.991769])
			.rotate([-0.1702675,0]);

			// create the path tool
			var path = d3.geo.path().projection(projection);



		// fetch geojson
		d3.json("/data/nyct-final.geojson",function (mapData) {
				// create a map of our census data, so we can easily find records
				// correspondng to a particular state
				var nycMap = d3.map();
				mapData.forEach(function(d){nycMap.set(d.id,d)});

				// loop through all of the path data, attaching the appropriate
				// record to each one based on the name
				for (var i = 0; i < mapData.features.length; i++){
					var name = mapData.features[i].properties.name;
					mapData.features[i].properties.value = nycMap.get(name);
				}

				// create the states in the SVG
				var tracts = svg.selectAll("path")
				.data(mapData.features)
				.enter()
				.append("path")
				.attr("d", path)
				.attr("class","tract");
		});

			



		</script>
	</body>
</html>
